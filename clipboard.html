<!DOCTYPE html>

<html lang="zh-CN">

<head>

 <meta charset="UTF-8">

 <meta name="viewport" content="width=device-width, initial-scale=1.0">

 <title>实时云剪贴板</title>

 <style>

 /* 极简主义设计风格 */

 body, html {

 margin: 0;

 padding: 0;

 height: 100%;

 background-color: #1e1e1e; /* 深色背景护眼 */

 color: #d4d4d4;

 font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;

 }

 #editor {

 width: 100%;

 height: 100%;

 border: none;

 outline: none;

 background: transparent;

 color: inherit;

 padding: 20px;

 font-size: 18px;

 line-height: 1.6;

 resize: none; /* 禁止手动拖动大小 */

 box-sizing: border-box;

 }

 /* 状态指示灯 */

 #status {

 position: fixed;

 bottom: 10px;

 right: 10px;

 width: 10px;

 height: 10px;

 border-radius: 50%;

 background-color: #666;

 transition: background-color 0.3s;

 }

 </style>

</head>

<body>

 <textarea id="editor" placeholder="在此输入文字，多端实时同步..."></textarea>

 <div id="status" title="同步状态"></div>

 <script type="module">

 // 1. 引入 Firebase SDK

 import { initializeApp } from "www.gstatic.com...";

 import { getDatabase, ref, set, onValue } from "www.gstatic.com...";

 // 2. 你的 Firebase 配置 (请用你的真实配置替换下面内容)

 // ======================================================

 const firebaseConfig = {

 apiKey: "AIzaSyBKi1iXQiSywICQTqItg0EUZe4CCDmnuSo",

 authDomain: "clipboard-6a28d.firebaseapp.com",

 databaseURL: "clipboard-6a28d-default-rtdb.firebaseio.com... ",

 projectId: "clipboard-6a28d",

 storageBucket: "clipboard-6a28d.firebasestorage.app",

 messagingSenderId: "454201337552",

 appId: "1:454201337552:web:cf07215996e4460cb5e0d5"

 };

 // ======================================================

 // 初始化 Firebase

 const app = initializeApp(firebaseConfig);

 const db = getDatabase(app);

 

 // 定义数据库中的路径，你可以把 'shared_board' 改成任何复杂的随机字符串作为你的“密码”

 // 例如: const dbRef = ref(db, 'my_secret_board_888');

 const dbRef = ref(db, 'shared_board');

 const editor = document.getElementById('editor');

 const status = document.getElementById('status');

 let isTyping = false;

 // 3. 监听数据库变化 (接收同步)

 onValue(dbRef, (snapshot) => {

 const data = snapshot.val();

 // 只有当内容不同，且用户当前没有在疯狂输入时才更新，防止光标跳动

 if (data !== editor.value && !isTyping) {

 editor.value = data || "";

 }

 status.style.backgroundColor = "#4caf50"; // 绿色代表已连接

 });

 // 4. 监听输入事件 (发送同步)

 editor.addEventListener('input', (e) => {

 isTyping = true;

 status.style.backgroundColor = "#ff9800"; // 橙色代表正在同步

 

 set(dbRef, e.target.value).then(() => {

 isTyping = false;

 status.style.backgroundColor = "#4caf50";

 }).catch((error) => {

 console.error("同步失败:", error);

 status.style.backgroundColor = "#f44336"; // 红色代表错误

 });

 });

 </script>

</body>

</html>
